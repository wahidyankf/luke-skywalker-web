"use strict";var data={name:"Luke Skywalker",url:{searchPeople:"https://swapi.co/api/people/?search=",movie:"https://swapi.co/api/films/"},bio:{height:"",mass:"",hairColor:"",skinColor:"",birthYear:"",gender:""},moviesURL:[],moviesPlayed:[],moviesData:[],movieRelated:[],movieRelatedData:{title:"",director:"",producer:"",releaseDate:"",openingCrawl:"",openingCrawlExcerpt:""}},controller={getName:function(){return data.name},getLastName:function(){var e=data.name.split(" ");return e[e.length-1]},getMoviesData:function(){return data.moviesData},setRelatedMovie:function(){var e=[1,2,3,4,5,6,7];data.moviesURL.forEach(function(e){var a=/\d/;data.moviesPlayed.push(parseInt(a.exec(e)[0]))}),e.forEach(function(e){-1==data.moviesPlayed.indexOf(parseInt(e))&&data.movieRelated.push(e)})},fetchPerson:function(e){var a=this,t=e.toLowerCase().replace(" ","%20"),i=data.url.searchPeople+t;$.ajax({method:"GET",url:i}).done(function(e){data.bio.height=e.results[0].height,data.bio.mass=e.results[0].mass,data.bio.hairColor=e.results[0].hair_color,data.bio.skinColor=e.results[0].skin_color,data.bio.birthYear=e.results[0].birth_year,data.bio.gender=e.results[0].gender,data.moviesURL=e.results[0].films,data.moviesURL.map(function(e){return a.fetchMovie(e)}),a.setRelatedMovie(),a.fetchRelatedMovie()}).done(function(e){setTimeout(function(){view.renderBio(),view.renderMovies(),view.renderRelatedMovie()},2500)})},fetchMovie:function(e){$.ajax({method:"GET",url:e}).done(function(e){var a={};a.title=e.title,a.director=e.director,a.releaseDate=e.release_date,data.moviesData.push(a)})},fetchRelatedMovie:function(){url=data.url.movie+data.movieRelated[0],$.ajax({method:"GET",url:url}).done(function(e){data.movieRelatedData.title=e.title,data.movieRelatedData.director=e.director,data.movieRelatedData.producer=e.producer,data.movieRelatedData.releaseDate=e.release_date,data.movieRelatedData.openingCrawl=e.opening_crawl,data.movieRelatedData.openingCrawlExcerpt=e.opening_crawl.split(" ").slice(0,32).join(" ")+"..."})}},view={renderInit:function(){var e='\n    <div id="heading">\n      <h1>'+controller.getName()+'</h1>\n    </div>\n    <div class="biography">\n      <div class="profile-picture">\n      <span class="fa fa-user-o fa-2x" aria-hidden="true"></span></div>\n      <div class="bio-data"></div>\n    </div>\n    <div class="person-movie">\n      <h2>'+controller.getLastName()+' Movie\'s</h2>\n      <span id="see-more-movie">See More</span>\n      <div class="movies"></div>\n    </div>\n    <div class="related-movie">\n      <h2>Related Another Movie\'s</h2>\n    </div>\n    ';$("body").append(e)},renderBio:function(){var e="\n    <table>\n      <tr><th>Height:</th><td>"+data.bio.height+" cm</td></tr>\n      <tr><th>Mass:</th><td>"+data.bio.mass+" kg</td></tr>\n      <tr><th>Hair Color:</th><td>"+data.bio.hairColor+"</td></tr>\n      <tr><th>Skin Color:</th><td>"+data.bio.skinColor+"</td></tr>\n      <tr><th>Birth Year:</th><td>"+data.bio.birthYear+"</td></tr>\n      <tr><th>Gender:</th><td>"+data.bio.gender+"</td></tr>\n    </table>\n    ";$(".bio-data").html(e)},renderMovies:function(){var e=[];data.moviesData.forEach(function(a,t){var i="";i=t%2==0?"movie-item-play-odd":"movie-item-play-even",e.push('\n      <div class="movie-item">\n        <div class="'+i+' movie-item-play">\n          <span class="fa fa-play-circle-o fa-3x" aria-hidden="true"></span>\n        </div>\n        <div class="movie-item-data-wrapper">\n          <h3 class="movie-item-heading">'+a.title+'</h3>\n          <div class="movie-item-data">\n            <div class="movie-item-data-top">\n              <p>Director: </p>\n              <p>'+a.director+'</p>\n            </div>\n            <div class="movie-item-data-bottom">\n              <p>Release</p>\n              <p>'+a.releaseDate+"</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      ")}),$(".movies").html(e.join("")),$(".movie-item:gt(3)").hide(),$("#see-more-movie").on("click",function(e){$(".movie-item:gt(3)").show(),$("#see-more-movie").hide()})},renderRelatedMovie:function(){var e='\n    <div class="related-movie-card">\n      <div class="related-movie-data">\n        <h3 class="related-movie-heading">'+data.movieRelatedData.title+'</h3>\n        <div class="related-movie-desc">\n          <table>\n            <tr><th>Director:</th><td>'+data.movieRelatedData.director+"</td></tr>\n            <tr><th>Producer:</th><td>"+data.movieRelatedData.producer+"</td></tr>\n            <tr><th>Release Date:</th><td>"+data.movieRelatedData.releaseDate+'</td></tr>\n          </table>\n        </div>\n      </div>\n      <div class="crawl">\n        <p id="opening-crawl">'+data.movieRelatedData.openingCrawl+'</p>\n        <p id="opening-crawl-excerpt">'+data.movieRelatedData.openingCrawlExcerpt+'</p>\n        <span id="see-more-crawl">See More</span>\n      </div>\n    </div>\n    ';$(".related-movie").append(e),$("#opening-crawl").hide(),$("#see-more-crawl").on("click",function(e){$("#opening-crawl").show(),$("#opening-crawl-excerpt").hide(),$("#see-more-crawl").hide()})}};$(function(){view.renderInit(),controller.fetchPerson(controller.getName())});